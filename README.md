# LNChat

LNChat 是一个基于 Web 的移动端风格 AI 聊天应用，采用 PWA 技术，提供流畅的原生 App 级体验。它不仅仅是一个聊天工具，更是一个集成了日记、朋友圈、记忆管理等功能的完整 AI 伴侣生态系统。

## ✨ 核心特性

- **模块化架构**：使用 ES Modules 进行重构，代码逻辑清晰，易于扩展和维护。
- **海量存储 (IndexedDB)**：全面采用 IndexedDB 替代传统的 localStorage，支持存储大量的聊天记录、图片和数据，不再受 5MB 容量限制。
- **AI 智能对话**：
  - 支持 OpenAI 兼容格式的 API 调用（如 DeepSeek, SiliconFlow 等）。
  - **消息队列机制**：支持多消息合并发送，提供更自然的对话体验。
  - **上下文理解**：支持配置历史消息条数，让 AI 更好地理解对话背景。
  - **多模态支持**：支持发送图片给 AI（需模型支持）。
- **丰富的功能模块**：
  - **联系人管理**：创建多个 AI 角色，自定义人设、头像、模型参数。
  - **朋友圈 (Moments)**：模拟社交动态，AI 也会参与互动。
  - **记忆胶囊 (Memory)**：AI 会自动提取并存储关键记忆，你也可以手动管理。
  - **日记本 & 交换日记**：记录生活点滴，甚至与 AI 进行交换日记互动。
- **高度个性化**：
  - **外观定制**：支持自定义字体、气泡样式（颜色、圆角）、壁纸（Bing 每日壁纸或自定义图片）。
  - **沉浸体验**：支持壁纸遮罩透明度调节，提供磨砂玻璃效果。
- **数据自主**：支持完整的数据导出备份与导入恢复，数据完全掌握在用户手中。
- **PWA 支持**：可安装至手机主屏幕，支持离线访问（部分功能），像原生应用一样运行。

## 📁 项目结构

```text
/
├── index.html           # 应用入口，包含桌面布局和系统状态栏
├── manifest.json        # PWA 配置文件
├── LICENSE              # 许可证文件
├── README.md            # 项目说明文档
├── assets/              # 静态资源与提示词模板
│   ├── system_prompt.txt         # 系统预设提示词
│   └── exchange_diary_prompt.txt # 交换日记提示词
├── css/
│   └── styles.css       # 核心视觉样式，包含所有组件的 CSS
└── js/
    ├── main.js          # 系统内核，处理 App 加载、时钟、电池、壁纸等系统功能
    ├── db.js            # IndexedDB 数据库封装，管理所有数据存储
    ├── utils.js         # 通用工具函数库（时间格式化、文件处理等）
    ├── location.js      # 地理位置服务
    ├── weather.js       # 天气服务
    ├── logger.js        # 系统日志记录器
    └── apps/            # 独立 App 模块目录
        ├── chat.js      # 聊天功能：对话逻辑、消息渲染、AI 接口调用
        ├── contacts.js  # 联系人管理：角色创建、编辑、人设管理
        ├── diary.js     # 日记功能：普通日记与交换日记逻辑
        ├── moments.js   # 朋友圈功能：动态发布与展示
        ├── memory.js    # 记忆功能：AI 记忆管理
        ├── settings.js  # 设置：系统配置、数据备份恢复、外观设置
        └── placeholder.js # 占位模块（用于开发中的功能）
```

## 🚀 快速开始

### 本地预览
由于项目使用了 **ES Modules**，直接双击 `index.html` 打开会触发浏览器的跨域限制。

**推荐方式：**
1.  在 VS Code 中安装 **Live Server** 插件。
2.  右键点击 `index.html`，选择 **"Open with Live Server"**。

### 在线部署
您可以直接将本项目上传至 GitHub Pages、Netlify 或 Vercel。本项目已针对生产环境路径进行了优化，无需额外配置即可上线。

## 🛠️ 如何配置 AI？
1.  打开 LNChat，点击主页的 **“设置”** 图标。
2.  输入您的 **API URL**（如 SiliconFlow 或 OpenAI 兼容接口）。
3.  输入您的 **API Key**。
4.  指定 **模型名称**（如 `deepseek-ai/DeepSeek-V3`）。
5.  点击“保存”，即可开始与您的 AI 联系人聊天。

## ⚖️ 许可证

本项目采用 **[知识共享 署名-非商业性使用-相同方式共享 4.0 国际许可协议 (CC BY-NC-SA 4.0)](LICENSE)** 进行许可。

### 详细说明
为了保护项目的初衷，作者对本项目的使用有以下明确要求：

1. **允许二次传播与修改**：
   - 您可以自由地分享、传播本项目，也可以对源代码进行二次修改。
   - **授权要求**：对本项目主体核心代码进行二次修改前，**必须获得原作者授权**。
   - **前提条件**：在进行任何形式的二次传播或修改分发时，**必须保留原作者的署名**，并提供指向本项目的链接。

2. **严禁商业目的**：
   - **禁止直接销售**：严禁以任何形式有偿出售本项目的访问地址、下载链接或原始源代码。
   - **禁止修改后销售**：严禁在对本项目进行二次修改后，将其作为商业付费软件或服务进行出售。
   - **禁止源码交易**：本项目的源代码不允许以任何形式进行二次销售。

3. **衍生物商业许可（例外条款）**：
   - 上述限制**仅限于保护本项目的核心代码与程序本身**。
   - **内容衍生物不受限**：本项目**允许**并鼓励用户对基于本项目产生的**内容衍生物**进行商业化行为。
   - **版权归属**：衍生物（例如：您创作的角色人设卡、提示词预设、导出的聊天记录艺术加工等）的版权完全归属于创作者本人，您可以自由售卖这些内容。

4. **相同方式共享**：
   - 如果您基于本项目进行了修改或二次创作，您必须采用与本协议相同的 **CC BY-NC-SA 4.0** 协议来分发您的作品。
